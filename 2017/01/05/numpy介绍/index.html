<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>numpy--快速科学计算 | Hellowangxuee</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="python numpy" />
    
    <meta name="description" content="NumPy提供了两种基本的对象：

ndarray（N-dimensional array object）
ufunc（universal function object）。
ndarray(下文统一称之为数组)是存储单一数据类型的多维数组
ufunc则是能够对数组进行处理的函数。



ndarray组成：
实际的数据
描述这些数据的元数据

存取元素的高级方法
使用整数序列当使用整数序列对数组">
<meta property="og:type" content="article">
<meta property="og:title" content="numpy--快速科学计算">
<meta property="og:url" content="http://hellowangxuee.github.io/2017/01/05/numpy介绍/index.html">
<meta property="og:site_name" content="Hellowangxuee">
<meta property="og:description" content="NumPy提供了两种基本的对象：

ndarray（N-dimensional array object）
ufunc（universal function object）。
ndarray(下文统一称之为数组)是存储单一数据类型的多维数组
ufunc则是能够对数组进行处理的函数。



ndarray组成：
实际的数据
描述这些数据的元数据

存取元素的高级方法
使用整数序列当使用整数序列对数组">
<meta property="og:image" content="https://raw.githubusercontent.com/hellowangxuee/wangxue.github.io/master/images/%E6%8D%95%E8%8E%B7.PNG">
<meta property="og:updated_time" content="2017-01-06T11:04:11.682Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="numpy--快速科学计算">
<meta name="twitter:description" content="NumPy提供了两种基本的对象：

ndarray（N-dimensional array object）
ufunc（universal function object）。
ndarray(下文统一称之为数组)是存储单一数据类型的多维数组
ufunc则是能够对数组进行处理的函数。



ndarray组成：
实际的数据
描述这些数据的元数据

存取元素的高级方法
使用整数序列当使用整数序列对数组">
<meta name="twitter:image" content="https://raw.githubusercontent.com/hellowangxuee/wangxue.github.io/master/images/%E6%8D%95%E8%8E%B7.PNG">
    

    
        <link rel="alternate" href="/" title="Hellowangxuee" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
    

</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Inici</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Exercise/">Exercise</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Linux/">Linux</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/ML/">ML</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Science/">Science</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/word/">word</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/物联网/">物联网</a></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/zh-Hans">index.language</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">Quant a</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Cercar" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'categories',
            TAGS: 'etiquetes',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Science/">Science</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <article id="post-numpy介绍" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        numpy--快速科学计算
        </h1>
    

            </header>
        
        
            <div class="article-subtitle">
                <a href="/2017/01/05/numpy介绍/" class="article-date">
    <time datetime="2017-01-05T14:33:05.000Z" itemprop="datePublished">2017-01-05</time>
</a>
                
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python-numpy/">python numpy</a></li></ul>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p>NumPy提供了两种基本的对象：</p>
<ol>
<li>ndarray（N-dimensional array object）</li>
<li>ufunc（universal function object）。<ul>
<li>ndarray(下文统一称之为数组)是存储单一数据类型的多维数组</li>
<li>ufunc则是能够对数组进行处理的函数。</li>
</ul>
</li>
</ol>
<h4 id="ndarray"><a href="#ndarray" class="headerlink" title="ndarray"></a>ndarray</h4><h5 id="组成："><a href="#组成：" class="headerlink" title="组成："></a>组成：</h5><ol>
<li>实际的数据</li>
<li>描述这些数据的元数据</li>
</ol>
<h5 id="存取元素的高级方法"><a href="#存取元素的高级方法" class="headerlink" title="存取元素的高级方法"></a>存取元素的高级方法</h5><ol>
<li>使用整数序列<br>当使用整数序列对数组元素进行存取时，将使用整数序列中的每个元素作为下标，整数序列可以是列 表或者数组。使用整数序列作为下标获得的数组不和原始数组共享数据空间。</li>
<li>使用布尔数组<br>当使用布尔数组b作为下标存取数组x中的元素时，将收集数组x中所有在数组b中对应下标为True的 元素。使用布尔数组作为下标获得的数组不和原始数组共享数据空间，注意这种方式只对应于布尔数 组，不能使用布尔列表</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.arange(<span class="number">10</span>,<span class="number">1</span>,<span class="number">-1</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x </div><div class="line">array([<span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[[<span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">8</span>]] <span class="comment"># 获取x中的下标为3, 3, 1, 8的4个元素，组成一个新的数组 array([7, 7, 9, 2]) </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = x[np.array([<span class="number">3</span>,<span class="number">3</span>,<span class="number">-3</span>,<span class="number">8</span>])] <span class="comment">#下标可以是负数 </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">2</span>] = <span class="number">100</span> </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b </div><div class="line">array([<span class="number">7</span>, <span class="number">7</span>, <span class="number">100</span>, <span class="number">2</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x <span class="comment"># 由于b和x不共享数据空间，因此x中的值并没有改变 </span></div><div class="line">array([<span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[[<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>]] = <span class="number">-1</span>, <span class="number">-2</span>, <span class="number">-3</span> <span class="comment"># 整数序列下标也可以用来修改元素的值 </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x </div><div class="line">array([<span class="number">10</span>, <span class="number">-3</span>, <span class="number">8</span>, <span class="number">-1</span>, <span class="number">6</span>, <span class="number">-2</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>])</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.arange(<span class="number">5</span>,<span class="number">0</span>,<span class="number">-1</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x array([<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[np.array([<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">False</span>])] </div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 布尔数组中下标为0，2的元素为True，因此获取x中下标为0,2的元素 </span></div><div class="line">array([<span class="number">5</span>, <span class="number">3</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[[<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">False</span>]] </div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 如果是布尔列表，则把True当作1, False当作0，按照整数序列方式获取x中的元素 </span></div><div class="line">array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[np.array([<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, <span class="keyword">True</span>])] </div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 布尔数组的长度不够时，不够的部分都当作False array([5, 3, 2]) </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[np.array([<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, <span class="keyword">True</span>])] = <span class="number">-1</span>, <span class="number">-2</span>, <span class="number">-3</span> </div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 布尔数组下标也可以用来修改元素 </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x array([<span class="number">-1</span>, <span class="number">4</span>, <span class="number">-2</span>, <span class="number">-3</span>, <span class="number">1</span>])</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.random.rand(<span class="number">10</span>) <span class="comment"># 产生一个长度为10，元素值为0-1的随机数的数组 </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x array([ <span class="number">0.72223939</span>, <span class="number">0.921226</span> , <span class="number">0.7770805</span> , <span class="number">0.2055047</span> , <span class="number">0.17567449</span>, <span class="number">0.95799412</span>, <span class="number">0.12015178</span>, <span class="number">0.7627083</span> , <span class="number">0.43260184</span>, <span class="number">0.91379859</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x&gt;<span class="number">0.5</span> </div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 数组x中的每个元素和0.5进行大小比较，得到一个布尔数组，True表示x中对应的值大于0.5 </span></div><div class="line">array([ <span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">True</span>], dtype=bool) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[x&gt;<span class="number">0.5</span>] </div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 使用x&gt;0.5返回的布尔数组收集x中的元素，因此得到的结果是x中所有大于0.5的元素的数组 </span></div><div class="line">array([ <span class="number">0.72223939</span>, <span class="number">0.921226</span> , <span class="number">0.7770805</span> , <span class="number">0.95799412</span>, <span class="number">0.7627083</span> , <span class="number">0.91379859</span>])</div></pre></td></tr></table></figure>
<h4 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h4><p><img src="https://raw.githubusercontent.com/hellowangxuee/wangxue.github.io/master/images/%E6%8D%95%E8%8E%B7.PNG" alt=""></p>
<p>数组a实际上是一个加法表，纵轴的值为0, 10, 20, 30, 40, 50；横轴的值为0, 1, 2, 3, 4, 5。纵轴的每个元素都和横轴的每个元素求和，就得到图中 所示的数组a。你可以用下面的语句创建它</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.arange(<span class="number">0</span>, <span class="number">60</span>, <span class="number">10</span>).reshape(<span class="number">-1</span>, <span class="number">1</span>) + np.arange(<span class="number">0</span>, <span class="number">6</span>) </div><div class="line">array([[ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>], [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>], [<span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>], [<span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>], [<span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>]])</div></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/hellowangxuee/wangxue.github.io/master/images/捕获1.PNG" alt=""></p>
<ul>
<li>a[(0,1,2,3,4),(1,2,3,4,5)] : 用于存取数组的下标和仍然是一个有两个元素的组元，组元中的每个 元素都是整数序列，分别对应数组的第0轴和第1轴。从两个序列的对应位置取出两个整数组成下标： a[0,1], a[1,2], …, a[4,5]。</li>
<li>a[3:, [0, 2, 5]] : 下标中的第0轴是一个范围，它选取第3行之后的所有行；第1轴是整数序列，它 选取第0, 2, 5三列。</li>
<li>a[mask, 2] : 下标的第0轴是一个布尔数组，它选取第0，2，5行；第1轴是一个整数，选取第2 列</li>
</ul>
<h4 id="结构数组"><a href="#结构数组" class="headerlink" title="结构数组"></a>结构数组</h4><p>假设我们需要定义一个结构数组，它的每个元素都有name, age和weight字段。在NumPy中可以如下 定义</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </div><div class="line">persontype = np.dtype(&#123; <span class="string">'names'</span>:[<span class="string">'name'</span>, <span class="string">'age'</span>, <span class="string">'weight'</span>], <span class="string">'formats'</span>:[<span class="string">'S32'</span>,<span class="string">'i'</span>, <span class="string">'f'</span>]&#125;) </div><div class="line">a = np.array([(<span class="string">"Zhang"</span>,<span class="number">32</span>,<span class="number">75.5</span>),(<span class="string">"Wang"</span>,<span class="number">24</span>,<span class="number">65.2</span>)], dtype=persontype)</div></pre></td></tr></table></figure>
<p>我们先创建一个dtype对象persontype，通过其字典参数描述结构类型的各个字段。字典有两个关 键字：names，formats。每个关键字对应的值都是一个列表。names定义结构中的每个字段名，而 formats则定义每个字段的类型：</p>
<ul>
<li>S32 : 32个字节的字符串类型，由于结构中的每个元素的大小必须固定，因此需要指定字符串的 长度</li>
<li>i : 32bit的整数类型，相当于np.int32</li>
<li>f : 32bit的单精度浮点数类型，相当于np.float32</li>
</ul>
<p>然后我们调用array函数创建数组，通过关键字参数 dtype=persontype， 指定所创建的数组的元素类 型为结构persontype。运行上面程序之后，我们可以在IPython中执行如下的语句查看数组a的元素类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.dtype </div><div class="line">dtype([(<span class="string">'name'</span>, <span class="string">'|S32'</span>), (<span class="string">'age'</span>, <span class="string">'&lt;i4'</span>), (<span class="string">'weight'</span>, <span class="string">'&lt;f4'</span>)])</div></pre></td></tr></table></figure>
<p>这里我们看到了另外一种描述结构类型的方法： 一个包含多个组元的列表，其中形如 (字段名, 类型描 述) 的组元描述了结构中的每个字段。类型描述前面为我们添加了 <code>|</code>, <code>&lt;</code> 等字符，这些字符用来描述字 段值的字节顺序：</p>
<ul>
<li><code>| : 忽视字节顺序</code></li>
<li><code>&lt; : 低位字节在前</code></li>
<li><code>&lt; : 低位字节在前</code></li>
</ul>
<p>结构数组的存取方式和一般数组相同，通过下标能够取得其中的元素，注意元素的值看上去像是组 元，实际上它是一个结构：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>] (<span class="string">'Zhang'</span>, <span class="number">32</span>, <span class="number">75.5</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>].dtype </div><div class="line">dtype([(<span class="string">'name'</span>, <span class="string">'|S32'</span>), (<span class="string">'age'</span>, <span class="string">'&lt;i4'</span>), (<span class="string">'weight'</span>, <span class="string">'&lt;f4'</span>)])</div></pre></td></tr></table></figure>
<p>a[0]是一个结构元素，它和数组a共享内存数据，因此可以通过修改它的字段，改变原始数组中的对应字段：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = a[<span class="number">1</span>] &gt;&gt;&gt; c[<span class="string">"name"</span>] = <span class="string">"Li"</span> </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>][<span class="string">"name"</span>] <span class="string">"Li"</span></div></pre></td></tr></table></figure>
<p>结构像字典一样可以通过字符串下标获取其对应的字段值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>][<span class="string">"name"</span>] </div><div class="line"><span class="string">'Zhang'</span></div></pre></td></tr></table></figure>
<p>我们不但可以获得结构元素的某个字段，还可以直接获得结构数组的字段，它返回的是原始数组的视 图，因此可以通过修改b[0]改变a[0][‘’age’’]：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>b=a[:][<span class="string">"age"</span>] <span class="comment"># 或者a["age"] </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b array([<span class="number">32</span>, <span class="number">24</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">0</span>] = <span class="number">40</span> </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>][<span class="string">"age"</span>] </div><div class="line"><span class="number">40</span></div></pre></td></tr></table></figure>
<p>通过调用a.tostring或者a.tofile方法，可以直接输出数组a的二进制形式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.tofile(<span class="string">"test.bin"</span>)</div></pre></td></tr></table></figure>
<p>利用下面的C语言程序可以将test.bin文件中的数据读取出来</p>
<ul>
<li>内存对齐 C语言的结构体为了内存寻址方便，会自动的添加一些填充用的字节，这叫做内存对齐。例如 如果把下面的name[32]改为name[30]的话，由于内存对齐问题，在name和age中间会填补两 个字节，最终的结构体大小不会改变。因此如果numpy中的所配置的内存大小不符合C语言的 对齐规范的话，将会出现数据错位。为了解决这个问题，在创建dtype对象时，可以传递参数 align=True，这样numpy的结构数组的内存对齐和C语言的结构体就一致了。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="keyword">struct</span> person </div><div class="line">&#123; <span class="keyword">char</span> name[<span class="number">32</span>]; </div><div class="line">  <span class="keyword">int</span> age;</div><div class="line"> <span class="keyword">float</span> weight; &#125;;</div><div class="line"><span class="keyword">struct</span> person p[<span class="number">2</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</div><div class="line">  FILE *fp;</div><div class="line">  <span class="keyword">int</span> i;</div><div class="line">  fp=fopen(<span class="string">"test.bin"</span>,<span class="string">"rb"</span>);</div><div class="line">  fread(p, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> person), <span class="number">2</span>, fp);</div><div class="line">  fclose(fp);</div><div class="line">  <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%s %d %f\n"</span>, p[i].name, p[i].age, p[i].weight);</div><div class="line">  getchar();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="内存结构"><a href="#内存结构" class="headerlink" title="内存结构"></a>内存结构</h4><p>ndarray数组对象是如何在内存中储存的,关于数组的描述信息保存 在一个数据结构中，这个结构引用两个对象：一块用于保存数据的存储区域和一个用于描述元素类型 的dtype对象。</p>
<p><img src="https://raw.githubusercontent.com/hellowangxuee/wangxue.github.io/master/images/捕获3.PNG" alt=""></p>
<p>数据存储区域保存着数组中所有元素的二进制数据，dtype对象则知道如何将元素的二进制数据转换为 可用的值。数组的维数、大小等信息都保存在ndarray数组对象的数据结构中。图中显示的是如下数组 的内存结构：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]], dtype=np.float32)</div></pre></td></tr></table></figure>
<p>strides中保存的是当每个轴的下标增加1时，数据存储区中的指针所增加的字节数。例如图中的 strides为12,4，即第0轴的下标增加1时，数据的地址增加12个字节：即a[1,0]的地址比a[0,0]的地址要 高12个字节，正好是3个单精度浮点数的总字节数；第1轴下标增加1时，数据的地址增加4个字节，正 好是单精度浮点数的字节数。<br>如果strides中的数值正好和对应轴所占据的字节数相同的话，那么数据在内存中是连续存储的。然而 数据并不一定都是连续储存的，前面介绍过通过下标范围得到新的数组是原始数组的视图，即它和原 始视图共享数据存储区域：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = a[::<span class="number">2</span>,::<span class="number">2</span>] </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b</div><div class="line">array([[ <span class="number">0.</span>, <span class="number">2.</span>], [ <span class="number">6.</span>, <span class="number">8.</span>]], dtype=float32) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b.strides </div><div class="line">(<span class="number">24</span>, <span class="number">8</span>)</div></pre></td></tr></table></figure>
<p>由于数组b和数组a共享数据存储区，而b中的第0轴和第1轴都是数组a中隔一个元素取一个，因此数组 b的strides变成了24,8，正好都是数组a的两倍。 对照前面的图很容易看出数据0和2的地址相差8个字 节，而0和6的地址相差24个字节。</p>
<p>元素在数据存储区中的排列格式有两种：C语言格式和Fortan语言格式。在C语言中，多维数组的第 0轴是最上位的，即第0轴的下标增加1时，元素的地址增加的字节数最多；而Fortan语言的多维数 组的第0轴是最下位的，即第0轴的下标增加1时，地址只增加一个元素的字节数。在NumPy中，元 素在内存中的排列缺省是以C语言格式存储的，如果你希望改为Fortan格式的话，只需要给数组传递 order=’’F’’参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.array([[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]], dtype=np.float32, order=<span class="string">"F"</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c.strides </div><div class="line">(<span class="number">4</span>, <span class="number">12</span>)</div></pre></td></tr></table></figure>
<h4 id="ufunc运算"><a href="#ufunc运算" class="headerlink" title="ufunc运算"></a>ufunc运算</h4><p>ufunc是universal function的缩写，它是一种能对数组的每个元素进行操作的函数。NumPy内置的许 多ufunc函数都是在C语言级别实现的，因此它们的计算速度非常快。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.linspace(<span class="number">0</span>, <span class="number">2</span>*np.pi, <span class="number">10</span>) <span class="comment"># 对数组x中的每个元素进行正弦计算，返回一个同样大小的新数组 </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = np.sin(x) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y array([ <span class="number">0.00000000e+00</span>, <span class="number">6.42787610e-01</span>, <span class="number">9.84807753e-01</span>,</div><div class="line">             <span class="number">8.66025404e-01</span>, <span class="number">3.42020143e-01</span>, <span class="number">-3.42020143e-01</span>, </div><div class="line">             <span class="number">-8.66025404e-01</span>, <span class="number">-9.84807753e-01</span>, <span class="number">-6.42787610e-01</span>,</div><div class="line">             <span class="number">-2.44921271e-16</span>])</div></pre></td></tr></table></figure>
<p>先用linspace产生一个从0到2*PI的等距离的10个数，然后将其传递给sin函数，由于np.sin是一个 ufunc函数，因此它对x中的每个元素求正弦值，然后将结果返回，并且赋值给y。计算之后x中的值并 没有改变，而是新创建了一个数组保存结果。如果我们希望将sin函数所计算的结果直接覆盖到数组x上 去的话，可以将要被覆盖的数组作为第二个参数传递给ufunc函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>t = np.sin(x,x) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x </div><div class="line">array([ <span class="number">0.00000000e+00</span>, <span class="number">6.42787610e-01</span>, <span class="number">9.84807753e-01</span>,</div><div class="line">        <span class="number">8.66025404e-01</span>, <span class="number">3.42020143e-01</span>, <span class="number">-3.42020143e-01</span>, </div><div class="line">       <span class="number">-8.66025404e-01</span>, <span class="number">-9.84807753e-01</span>, <span class="number">-6.42787610e-01</span>, </div><div class="line">       <span class="number">-2.44921271e-16</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>id(t) == id(x) </div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure>
<p>sin函数的第二个参数也是x，那么它所做的事情就是对x中的每给值求正弦值，并且把结果保存到x中的 对应的位置中。此时函数的返回值仍然是整个计算的结果，只不过它就是x，因此两个变量的id是相同 的(变量t和变量x指向同一块内存区域)。</p>
<p>我用下面这个小程序，比较了一下numpy.math和Python标准库的math.sin的计算速度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> time </div><div class="line"><span class="keyword">import</span> math </div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line">x = [i * <span class="number">0.001</span> <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">1000000</span>)] </div><div class="line">start = time.clock() </div><div class="line"><span class="keyword">for</span> i, t <span class="keyword">in</span> enumerate(x): </div><div class="line">    x[i] = math.sin(t) </div><div class="line"><span class="keyword">print</span> <span class="string">"math.sin:"</span>, time.clock() - start</div><div class="line">    </div><div class="line">x = [i * <span class="number">0.001</span> <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">1000000</span>)] </div><div class="line">x = np.array(x) </div><div class="line">start = time.clock() </div><div class="line">np.sin(x,x) </div><div class="line"><span class="keyword">print</span> <span class="string">"numpy.sin:"</span>, time.clock() - start</div><div class="line"><span class="comment"># 输出 </span></div><div class="line"><span class="comment"># math.sin: 1.15426932753 </span></div><div class="line"><span class="comment"># numpy.sin: 0.0882399858083</span></div></pre></td></tr></table></figure>
<p>在我的电脑上计算100万次正弦值，numpy.sin比math.sin快10倍多。这得利于numpy.sin在C语言级 别的循环计算。numpy.sin同样也支持对单个数值求正弦，例如：numpy.sin(0.5)。不过值得注意的 是，对单个数的计算math.sin则比numpy.sin快得多了，让我们看下面这个测试程序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">x = [i * <span class="number">0.001</span> <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">1000000</span>)] </div><div class="line">start = time.clock() </div><div class="line"><span class="keyword">for</span> i, t <span class="keyword">in</span> enumerate(x): </div><div class="line">    x[i] = np.sin(t) </div><div class="line"><span class="keyword">print</span> <span class="string">"numpy.sin loop:"</span>, time.clock() - start</div><div class="line"><span class="comment"># 输出 </span></div><div class="line"><span class="comment"># numpy.sin loop: 5.72166965355</span></div></pre></td></tr></table></figure>
<p>请注意numpy.sin的计算速度只有math.sin的1/5。这是因为numpy.sin为了同时支持数组和单个值的 计算，其C语言的内部实现要比math.sin复杂很多，如果我们同样在Python级别进行循环的话，就会 看出其中的差别了。此外，numpy.sin返回的数的类型和math.sin返回的类型有所不同，math.sin返 回的是Python的标准float类型，而numpy.sin则返回一个numpy.float64类型：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(math.sin(<span class="number">0.5</span>)) </div><div class="line">&lt;type <span class="string">'float'</span>&gt; </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(np.sin(<span class="number">0.5</span>)) </div><div class="line">&lt;type <span class="string">'numpy.float64'</span>&gt;</div></pre></td></tr></table></figure>
<p>NumPy中有众多的ufunc函数为我们提供各式各样的计算。除了sin这种单输入函数之外，还有许多多 个输入的函数，add函数就是一个最常用的例子。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">0</span>,<span class="number">4</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.arange(<span class="number">1</span>,<span class="number">5</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b </div><div class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.add(a,b) </div><div class="line">array([<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.add(a,b,a) </div><div class="line">array([<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a </div><div class="line">array([<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>])</div></pre></td></tr></table></figure>
<p>add函数返回一个新的数组，此数组的每个元素都为两个参数数组的对应元素之和。它接受第3个参数 指定计算结果所要写入的数组，如果指定的话，add函数就不再产生新的数组。<br>由于Python的操作符重载功能，计算两个数组相加可以简单地写为a+b，而np.add(a,b,a)则可以用a +=b来表示。</p>
<h4 id="广播"><a href="#广播" class="headerlink" title="广播"></a>广播</h4><p>当我们使用ufunc函数对两个数组进行计算时，ufunc函数会对这两个数组的对应元素进行计算，因 此它要求这两个数组有相同的大小(shape相同)。如果两个数组的shape不同的话，会进行如下的广播 (broadcasting)处理:</p>
<ul>
<li>让所有输入数组都向其中shape最长的数组看齐，shape中不足的部分都通过在前面加1补齐</li>
<li>输出数组的shape是输入数组shape的各个轴上的最大值</li>
<li>如果输入数组的某个轴和输出数组的对应轴的长度相同或者其长度为1时，这个数组能够用来计 算，否则出错</li>
<li>当输入数组的某个轴的长度为1时，沿着此轴运算时都用此轴上的第一组值</li>
</ul>
<p>Example:</p>
<p>先创建一个二维数组a，其shape为(6,1):</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">0</span>, <span class="number">60</span>, <span class="number">10</span>).reshape(<span class="number">-1</span>, <span class="number">1</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a </div><div class="line">array([[ <span class="number">0</span>], [<span class="number">10</span>], [<span class="number">20</span>], [<span class="number">30</span>], [<span class="number">40</span>], [<span class="number">50</span>]]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.shape (<span class="number">6</span>, <span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>再创建一维数组b，其shape为(5,)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.arange(<span class="number">0</span>, <span class="number">5</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b </div><div class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b.shape </div><div class="line">(<span class="number">5</span>,)</div></pre></td></tr></table></figure>
<p>计算a和b的和，得到一个加法表，它相当于计算a,b中所有元素组的和，得到一个shape为(6,5)的数 组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = a + b </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c </div><div class="line">array([[ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], </div><div class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>], </div><div class="line">       [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>], </div><div class="line">       [<span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>],</div><div class="line">       [<span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>], </div><div class="line">       [<span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>]]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c.shape </div><div class="line">(<span class="number">6</span>, <span class="number">5</span>)</div></pre></td></tr></table></figure>
<p>由于a和b的shape长度(也就是ndim属性)不同，根据规则1，需要让b的shape向a对齐，于是将b的 shape前面加1，补齐为(1,5)。相当于做了如下计算：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>b.shape=<span class="number">1</span>,<span class="number">5</span> </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b </div><div class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</div></pre></td></tr></table></figure>
<p>这样加法运算的两个输入数组的shape分别为(6,1)和(1,5)，根据规则2，输出数组的各个轴的长度为输 入数组各个轴上的长度的最大值，可知输出数组的shape为(6,5)。<br>由于b的第0轴上的长度为1，而a的第0轴上的长度为6，因此为了让它们在第0轴上能够相加，需要将b 在第0轴上的长度扩展为6，这相当于：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = b.repeat(<span class="number">6</span>,axis=<span class="number">0</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b </div><div class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], </div><div class="line">       [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], </div><div class="line">       [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], </div><div class="line">       [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], </div><div class="line">       [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], </div><div class="line">       [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</div></pre></td></tr></table></figure>
<p>由于a的第1轴的长度为1，而b的第一轴长度为5，因此为了让它们在第1轴上能够相加，需要将a在第1 轴上的长度扩展为5，这相当于：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = a.repeat(<span class="number">5</span>, axis=<span class="number">1</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a </div><div class="line">array([[ <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], </div><div class="line">       [<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>], </div><div class="line">       [<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>], </div><div class="line">       [<span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>], </div><div class="line">       [<span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>], </div><div class="line">       [<span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>]])</div></pre></td></tr></table></figure>
<p>经过上述处理之后，a和b就可以按对应元素进行相加运算了。<br>当然，numpy在执行a+b运算时，其内部并不会真正将长度为1的轴用repeat函数进行扩展，如果这 样做的话就太浪费空间了。<br>由于这种广播计算很常用，因此numpy提供了一个快速产生如上面a,b数组的方法： ogrid对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x,y = np.ogrid[<span class="number">0</span>:<span class="number">5</span>,<span class="number">0</span>:<span class="number">5</span>] </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x </div><div class="line">array([[<span class="number">0</span>], </div><div class="line">       [<span class="number">1</span>], </div><div class="line">       [<span class="number">2</span>], </div><div class="line">       [<span class="number">3</span>], </div><div class="line">       [<span class="number">4</span>]]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y </div><div class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</div></pre></td></tr></table></figure>
<p>ogrid是一个很有趣的对象，它像一个多维数组一样，用切片组元作为下标进行存取，返回的是一组可 以用来广播计算的数组。其切片下标有两种形式：</p>
<ul>
<li>开始值:结束值:步长，和np.arange(开始值, 结束值, 步长)类似</li>
<li>开始值:结束值:长度j，当第三个参数为虚数时，它表示返回的数组的长度，和np.linspace(开始 值, 结束值, 长度)类似：<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">   &gt;&gt;&gt; x, y = np.ogrid[<span class="number">0</span>:<span class="number">1</span>:<span class="number">4j</span>, <span class="number">0</span>:<span class="number">1</span>:<span class="number">3j</span>] </div><div class="line">   &gt;&gt;&gt; x </div><div class="line">   array([[ <span class="number">0.</span> ], </div><div class="line">[ <span class="number">0.33333333</span>], </div><div class="line">[ <span class="number">0.66666667</span>], </div><div class="line">[ <span class="number">1.</span> ]]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y</div><div class="line">array([[ <span class="number">0.</span> , <span class="number">0.5</span>, <span class="number">1.</span> ]])</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">* ogrid为什么不是函数 根据Python的语法，只有在中括号中才能使用用冒号隔开的切片语法，如果ogrid是函数的话， 那么这些切片必须使用slice函数创建，这显然会增加代码的长度。</div><div class="line"></div><div class="line">利用ogrid的返回值，我能很容易计算x, y网格面上各点的值，或者x, y, z网格体上各点的值。下面是绘 制三维曲面 x * exp(x**2 - y**2) 的程序：</div><div class="line"></div><div class="line">​```python</div><div class="line">import numpy as np </div><div class="line">from enthought.mayavi import mlab</div><div class="line">x, y = np.ogrid[-2:2:20j, -2:2:20j] </div><div class="line">z = x * np.exp( - x**2 - y**2)</div><div class="line">pl = mlab.surf(x, y, z, warp_scale=&quot;auto&quot;)</div><div class="line">mlab.axes(xlabel=&apos;x&apos;, ylabel=&apos;y&apos;, zlabel=&apos;z&apos;) </div><div class="line">mlab.outline(pl)</div></pre></td></tr></table></figure>
<p>此程序使用mayavi的mlab库快速绘制如图所示的3D曲面</p>
<p><img src="https://raw.githubusercontent.com/hellowangxuee/wangxue.github.io/master/images/捕获4.PNG" alt=""></p>
<h4 id="矩阵运算"><a href="#矩阵运算" class="headerlink" title="矩阵运算"></a>矩阵运算</h4><p>NumPy和Matlab不一样，对于多维数组的运算，缺省情况下并不使用矩阵运算，如果你希望对数组进 行矩阵运算的话，可以调用相应的函数。</p>
<p>matrix对象 </p>
<p>numpy库提供了matrix类，使用matrix类创建的是矩阵对象，它们的加减乘除运算缺省采用矩阵 方式计算，因此用法和matlab十分类似。但是由于NumPy中同时存在ndarray和matrix对象，因 此用户很容易将两者弄混。这有违Python的“显式优于隐式”的原则，因此并不推荐在较复杂的 程序中使用matrix。下面是使用matrix的一个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.matrix([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">5</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">9</span>,<span class="number">9</span>]]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a*a**<span class="number">-1</span> </div><div class="line">matrix([[ <span class="number">1.00000000e+00</span>, <span class="number">1.66533454e-16</span>, <span class="number">-8.32667268e-17</span>], </div><div class="line">        [ <span class="number">-2.77555756e-16</span>, <span class="number">1.00000000e+00</span>, <span class="number">-2.77555756e-17</span>], </div><div class="line">        [ <span class="number">1.66533454e-16</span>, <span class="number">5.55111512e-17</span>, <span class="number">1.00000000e+00</span>]])</div></pre></td></tr></table></figure>
<p>因为a是用matrix创建的矩阵对象，因此乘法和幂运算符都变成了矩阵运算，于是上面计算的是矩 阵a和其逆矩阵的乘积，结果是一个单位矩阵。</p>
<p>矩阵的乘积可以使用dot函数进行计算。对于二维数组，它计算的是矩阵乘积，对于一维数组，它计算 的是其点积。当需要将一维数组当作列矢量或者行矢量进行矩阵运算时，推荐先使用reshape函数将一维数组转换为二维数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.reshape((<span class="number">-1</span>,<span class="number">1</span>)) </div><div class="line">array([[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.reshape((<span class="number">1</span>,<span class="number">-1</span>)) </div><div class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]])</div></pre></td></tr></table></figure>
<h4 id="文件存取"><a href="#文件存取" class="headerlink" title="文件存取"></a>文件存取</h4><p>NumPy提供了多种文件操作函数方便我们存取数组内容。文件存取的格式分为两类：二进制和文本。 而二进制格式的文件又分为NumPy专用的格式化二进制类型和无格式类型。<br>使用数组的方法函数tofile可以方便地将数组中数据以二进制的格式写进文件。tofile输出的数据没有格 式，因此用numpy.fromfile读回来的时候需要自己格式化数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">0</span>,<span class="number">12</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.shape = <span class="number">3</span>,<span class="number">4</span> </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a </div><div class="line">array([[ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], </div><div class="line">       [ <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>], </div><div class="line">       [ <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.tofile(<span class="string">"a.bin"</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.fromfile(<span class="string">"a.bin"</span>, dtype=np.float) <span class="comment"># 按照float类型读入数据 </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b <span class="comment"># 读入的数据是错误的 </span></div><div class="line">array([ <span class="number">2.12199579e-314</span>, <span class="number">6.36598737e-314</span>, <span class="number">1.06099790e-313</span>, </div><div class="line">       <span class="number">1.48539705e-313</span>, <span class="number">1.90979621e-313</span>, <span class="number">2.33419537e-313</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.dtype <span class="comment"># 查看a的dtype dtype('int32') </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.fromfile(<span class="string">"a.bin"</span>, dtype=np.int32) <span class="comment"># 按照int32类型读入数据</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b <span class="comment"># 数据是一维的 </span></div><div class="line">array([ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b.shape = <span class="number">3</span>, <span class="number">4</span> <span class="comment"># 按照a的shape修改b的shape </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b <span class="comment"># 这次终于正确了 </span></div><div class="line">array([[ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [ <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>], [ <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</div></pre></td></tr></table></figure>
<p>从上面的例子可以看出，需要在读入的时候设置正确的dtype和shape才能保证数据一致。并且tofile 函数不管数组的排列顺序是C语言格式的还是Fortran语言格式的，统一使用C语言格式输出。<br>此外如果fromfile和tofile函数调用时指定了sep关键字参数的话，数组将以文本格式输入输出。<br>numpy.load和numpy.save函数以NumPy专用的二进制类型保存数据，这两个函数会自动处理元素类 型和shape等信息，使用它们读写数组就方便多了，但是numpy.save输出的文件很难和其它语言编写 的程序读入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.save(<span class="string">"a.npy"</span>, a) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.load( <span class="string">"a.npy"</span> ) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c </div><div class="line">array([[ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], </div><div class="line">       [ <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>], </div><div class="line">       [ <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</div></pre></td></tr></table></figure>
<p>如果你想将多个数组保存到一个文件中的话，可以使用numpy.savez函数。savez函数的第一个参数是 文件名，其后的参数都是需要保存的数组，也可以使用关键字参数为数组起一个名字，非关键字参数 传递的数组会自动起名为arr_0, arr_1, …。savez函数输出的是一个压缩文件(扩展名为npz)，其中每个 文件都是一个save函数保存的npy文件，文件名对应于数组名。load函数自动识别npz文件，并且返回 一个类似于字典的对象，可以通过数组名作为关键字获取数组的内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.arange(<span class="number">0</span>, <span class="number">1.0</span>, <span class="number">0.1</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.sin(b) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.savez(<span class="string">"result.npz"</span>, a, b, sin_array = c) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = np.load(<span class="string">"result.npz"</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r[<span class="string">"arr_0"</span>] <span class="comment"># 数组a </span></div><div class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], </div><div class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r[<span class="string">"arr_1"</span>] <span class="comment"># 数组b </span></div><div class="line">array([ <span class="number">0.</span> , <span class="number">0.1</span>, <span class="number">0.2</span>, <span class="number">0.3</span>, <span class="number">0.4</span>, <span class="number">0.5</span>, <span class="number">0.6</span>, <span class="number">0.7</span>, <span class="number">0.8</span>, <span class="number">0.9</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r[<span class="string">"sin_array"</span>] <span class="comment"># 数组c </span></div><div class="line">array([ <span class="number">0.</span> , <span class="number">0.09983342</span>, <span class="number">0.19866933</span>, <span class="number">0.29552021</span>, <span class="number">0.38941834</span>, </div><div class="line">       <span class="number">0.47942554</span>, <span class="number">0.56464247</span>, <span class="number">0.64421769</span>, <span class="number">0.71735609</span>, <span class="number">0.78332691</span>])</div></pre></td></tr></table></figure>
<p>如果你用解压软件打开result.npz文件的话，会发现其中有三个文件：arr_0.npy， arr_1.npy， sin_array.npy，其中分别保存着数组a, b, c的内容</p>
<p>使用numpy.savetxt和numpy.loadtxt可以读写1维和2维的数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">0</span>,<span class="number">12</span>,<span class="number">0.5</span>).reshape(<span class="number">4</span>,<span class="number">-1</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.savetxt(<span class="string">"a.txt"</span>, a) <span class="comment"># 缺省按照'%.18e'格式保存数据，以空格分隔 </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.loadtxt(<span class="string">"a.txt"</span>) </div><div class="line">array([[ <span class="number">0.</span> , <span class="number">0.5</span>, <span class="number">1.</span> , <span class="number">1.5</span>, <span class="number">2.</span> , <span class="number">2.5</span>], </div><div class="line">       [ <span class="number">3.</span> , <span class="number">3.5</span>, <span class="number">4.</span> , <span class="number">4.5</span>, <span class="number">5.</span> , <span class="number">5.5</span>], </div><div class="line">       [ <span class="number">6.</span> , <span class="number">6.5</span>, <span class="number">7.</span> , <span class="number">7.5</span>, <span class="number">8.</span> , <span class="number">8.5</span>], </div><div class="line">       [ <span class="number">9.</span> , <span class="number">9.5</span>, <span class="number">10.</span> , <span class="number">10.5</span>, <span class="number">11.</span> , <span class="number">11.5</span>]]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.savetxt(<span class="string">"a.txt"</span>, a, fmt=<span class="string">"%d"</span>, delimiter=<span class="string">","</span>) <span class="comment">#改为保存为整数，以逗号分隔 </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.loadtxt(<span class="string">"a.txt"</span>,delimiter=<span class="string">","</span>) <span class="comment"># 读入的时候也需要指定逗号分隔 </span></div><div class="line">array([[ <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">2.</span>, <span class="number">2.</span>], </div><div class="line">       [ <span class="number">3.</span>, <span class="number">3.</span>, <span class="number">4.</span>, <span class="number">4.</span>, <span class="number">5.</span>, <span class="number">5.</span>], </div><div class="line">       [ <span class="number">6.</span>, <span class="number">6.</span>, <span class="number">7.</span>, <span class="number">7.</span>, <span class="number">8.</span>, <span class="number">8.</span>], </div><div class="line">       [ <span class="number">9.</span>, <span class="number">9.</span>, <span class="number">10.</span>, <span class="number">10.</span>, <span class="number">11.</span>, <span class="number">11.</span>]])</div></pre></td></tr></table></figure>
<p>文件名和文件对象 本节介绍所举的例子都是传递的文件名，也可以传递已经打开的文件对象，例如对于load和save 函数来说，如果使用文件对象的话，可以将多个数组储存到一个npy文件中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">8</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = np.add.accumulate(a) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = a + b </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f = file(<span class="string">"result.npy"</span>, <span class="string">"wb"</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.save(f, a) <span class="comment"># 顺序将a,b,c保存进文件对象f </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.save(f, b) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.save(f, c) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.close() </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f = file(<span class="string">"result.npy"</span>, <span class="string">"rb"</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.load(f) <span class="comment"># 顺序从文件对象f中读取内容 </span></div><div class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.load(f) </div><div class="line">array([ <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">21</span>, <span class="number">28</span>]) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.load(f) </div><div class="line">array([ <span class="number">0</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">14</span>, <span class="number">20</span>, <span class="number">27</span>, <span class="number">35</span>])</div></pre></td></tr></table></figure>
<h4 id="一些函数和属性"><a href="#一些函数和属性" class="headerlink" title="一些函数和属性"></a>一些函数和属性</h4><p><code>linspace</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">numpy.linspace(start, stop, num=<span class="number">50</span>, endpoint=<span class="keyword">True</span>, retstep=<span class="keyword">False</span>, dtype=<span class="keyword">None</span>)</div></pre></td></tr></table></figure>
<p>Example</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.linspace(<span class="number">2.0</span>, <span class="number">3.0</span>, num=<span class="number">5</span>)</div><div class="line">    array([ <span class="number">2.</span>  ,  <span class="number">2.25</span>,  <span class="number">2.5</span> ,  <span class="number">2.75</span>,  <span class="number">3.</span>  ])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.linspace(<span class="number">2.0</span>, <span class="number">3.0</span>, num=<span class="number">5</span>, endpoint=<span class="keyword">False</span>)</div><div class="line">    array([ <span class="number">2.</span> ,  <span class="number">2.2</span>,  <span class="number">2.4</span>,  <span class="number">2.6</span>,  <span class="number">2.8</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.linspace(<span class="number">2.0</span>, <span class="number">3.0</span>, num=<span class="number">5</span>, retstep=<span class="keyword">True</span>)</div><div class="line">    (array([ <span class="number">2.</span>  ,  <span class="number">2.25</span>,  <span class="number">2.5</span> ,  <span class="number">2.75</span>,  <span class="number">3.</span>  ]), <span class="number">0.25</span>)</div></pre></td></tr></table></figure>
<p><code>meshgrid</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">numpy.meshgrid(*xi, **kwargs)</div></pre></td></tr></table></figure>
<p>Exampl</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>nx, ny = (<span class="number">3</span>, <span class="number">2</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.linspace(<span class="number">0</span>, <span class="number">1</span>, nx)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = np.linspace(<span class="number">0</span>, <span class="number">1</span>, ny)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>xv, yv = meshgrid(x, y)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>xv</div><div class="line">array([[ <span class="number">0.</span> ,  <span class="number">0.5</span>,  <span class="number">1.</span> ],</div><div class="line">       [ <span class="number">0.</span> ,  <span class="number">0.5</span>,  <span class="number">1.</span> ]])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>yv</div><div class="line">array([[ <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>],</div><div class="line">       [ <span class="number">1.</span>,  <span class="number">1.</span>,  <span class="number">1.</span>]])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>xv, yv = meshgrid(x, y, sparse=<span class="keyword">True</span>)  <span class="comment"># make sparse output arrays</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>xv</div><div class="line">array([[ <span class="number">0.</span> ,  <span class="number">0.5</span>,  <span class="number">1.</span> ]])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>yv</div><div class="line">array([[ <span class="number">0.</span>],</div><div class="line">       [ <span class="number">1.</span>]])</div></pre></td></tr></table></figure>
<p><code>r_</code></p>
<p>将切片拼接到一起至第一轴</p>
<p>Example</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.r_[np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]), <span class="number">0</span>, <span class="number">0</span>, np.array([<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])]</div><div class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.r_[<span class="number">-1</span>:<span class="number">1</span>:<span class="number">6j</span>, [<span class="number">0</span>]*<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line">array([<span class="number">-1.</span> , <span class="number">-0.6</span>, <span class="number">-0.2</span>,  <span class="number">0.2</span>,  <span class="number">0.6</span>,  <span class="number">1.</span> ,  <span class="number">0.</span> ,  <span class="number">0.</span> ,  <span class="number">0.</span> ,  <span class="number">5.</span> ,  <span class="number">6.</span> ])</div></pre></td></tr></table></figure>
<p><code>c_</code></p>
<p>将切片拼接到一起至第二轴</p>
<p>Example</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>np.c_[np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]]), <span class="number">0</span>, <span class="number">0</span>, np.array([[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])]</div><div class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</div></pre></td></tr></table></figure>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://hellowangxuee.github.io/2017/01/05/numpy介绍/" data-id="cixpiremi0005covgqwwpfbh5" class="article-share-link"><i class="fa fa-share"></i>Compartir</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>


                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>seguir:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="/" target="_blank">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="/" target="_blank">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="google-plus" href="/" target="_blank">
                        <i class="icon fa fa-google-plus"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/hellowangxuee" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weibo" href="http://weibo.com/5160122596/profile?topnav=1&wvr=6&is_all=1" target="_blank">
                        <i class="icon fa fa-weibo"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2017/01/06/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">més nou</strong>
        <p class="article-nav-title">
        
            Hello World
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2014/11/07/first/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">antic</strong>
        <p class="article-nav-title">hello-world</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/01/08/树莓派初识/" class="thumbnail">
    
    
        <span style="background-image:url(https://raw.githubusercontent.com/hellowangxuee/wangxue.github.io/master/images/raspberry/tt.PNG)" alt="树莓派初识" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/物联网/">物联网</a></p>
                            <p class="item-title"><a href="/2017/01/08/树莓派初识/" class="title">树莓派初识</a></p>
                            <p class="item-date"><time datetime="2017-01-08T13:20:54.000Z" itemprop="datePublished">2017-01-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/01/06/word1/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/word/">word</a></p>
                            <p class="item-title"><a href="/2017/01/06/word1/" class="title">word1</a></p>
                            <p class="item-date"><time datetime="2017-01-06T12:53:53.000Z" itemprop="datePublished">2017-01-06</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/01/06/SVM/" class="thumbnail">
    
    
        <span style="background-image:url(https://raw.githubusercontent.com/hellowangxuee/wangxue.github.io/master/images/SVM/1.PNG)" alt="SVM" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/ML/">ML</a></p>
                            <p class="item-title"><a href="/2017/01/06/SVM/" class="title">SVM</a></p>
                            <p class="item-date"><time datetime="2017-01-06T12:19:31.000Z" itemprop="datePublished">2017-01-06</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/01/06/nl 命令/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Linux/">Linux</a></p>
                            <p class="item-title"><a href="/2017/01/06/nl 命令/" class="title">nl 命令</a></p>
                            <p class="item-date"><time datetime="2017-01-06T11:35:01.000Z" itemprop="datePublished">2017-01-06</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/01/06/hello-world/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/01/06/hello-world/" class="title">Hello World</a></p>
                            <p class="item-date"><time datetime="2017-01-06T07:59:56.642Z" itemprop="datePublished">2017-01-06</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Exercise/">Exercise</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ML/">ML</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Science/">Science</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/word/">word</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/物联网/">物联网</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">arxius</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">etiquetes</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/everyday-word/">everyday word</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python-numpy/">python numpy</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">etiqueta cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/everyday-word/" style="font-size: 10px;">everyday word</a> <a href="/tags/python-numpy/" style="font-size: 10px;">python numpy</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2017 Hello♥wangxuee</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'http://hellowangxuee.github.io/2017/01/05/numpy介绍/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
